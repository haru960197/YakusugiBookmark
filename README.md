# 屋久杉ブックマーク

「URL」「タイトル（メモ）」「#タグ」を入力してウェブサイトを登録し、管理するためのウェブアプリケーション。

タイトルを自分でつけることや#タグにより後から自分で検索などがしやすくなる

[サイトはこちら](https://haru960197.github.io/YakusugiBookmark/)
![siteImage](https://github.com/haru960197/YakusugiBookmark/assets/124692504/ab8ffdab-fb87-4722-bdbf-939d7ab000d1)

***

## 開発の動機

- 開発合宿を通して何を作ろうか悩んでいる中で思いついた。
- 「LaTeXの書式まとめサイト」などを作ろうとしていたが、それよりもほかのジャンルにも対応し、カスタマイズできるサイトのほうがいいのでは、と思った。
- まだまだ未熟な自分にとって、開発を通して学びが多いだろうと思った。

（なぜ「屋久杉」？→開発合宿の直前に屋久島に旅行に行き、合宿に参加した友人に「屋久杉の栞」のお土産を渡したことに由来している）

![yakusugi-bookmark](https://github.com/haru960197/YakusugiBookmark/assets/124692504/47ceccbe-743d-47cb-812d-b2355302320b)

***

## 「屋久杉ブックマーク」の特徴や機能

- 「タイトル」と「#タグ」（複数可能）をサイトに対してつけることができる
- サイトの「サムネイル」「ファビコン」を自動でとってきてくれる。
- 使用した#タグは履歴として残り、「新しい順」「頻度順」を選択してソートできる
- 「タイトル」または「#タグ」で検索が可能。
- サイトの並び順も自分で選択するこができる。
- Material UIを使用した、モダンでResponseiveなデザイン

***

## 開発途中で行き詰った点と解決策

- Local Storageの扱い
→状態変数初期化する際にデータを取得。状態変数を更新する関数の最後にLocal Storageをアップデート
![image](https://github.com/haru960197/YakusugiBookmark/assets/124692504/973c86a2-6bbc-4c1e-bf17-cf45a92fd359)

- サムネイルやfaviconが、CORSによりfetchで取得できない
→CORSはどうしようもなかったので、外部APIを使用。無料プランでAPIKeyを取得しているので、月に1000回までしかfetchできない。
そのため、画像取得するためには、APIKeyを各自で取得してもらうことになってしまった。

- レイアウト調整
→Material UIのGridを主に使用。Gridを入れ子にすることでいい感じになった。
`<Grid item container >`でアイテムとコンテナを兼ねることができる。この子は一つなら`<Grid item >`で囲わずにそのまま要素を入れてよい。

- 長いサイトのタイトルは切って「…」をつけたい
`<Link>`タグに直接その機能をつけることは
できなかったので、`<Link>`タグ内に`<Box>`タグ
を入れ、その中にタイトルを入れたらうまく
いった。
![image](https://github.com/haru960197/YakusugiBookmark/assets/124692504/0e5bad20-417d-4f31-b96f-b050f5179670)

***

## 開発合宿を通して得た技術的学び

- 状態変数が変化したときに行いたい処理は、`useEffect()`の副作用関数の中に書くか、ハンドラの中のみ。`set~()`はトップレベルで使ってはならない。
- `useState()`はトップレベルで使わなければならない。
- HTML要素は基本的に内側から、子要素によって幅が決まる。Ex) `<Stack />`は子要素が長ければいくらでも伸びてしまう。
- `<Card>`の内部で`<Divider />`を使うときは、前後の要素を`<CardContent >`で囲わないと端から端まで線がいかない
- APIKeyなどは、別jsファイルが吐き出すようにし、githubではkey同じ桁数で000000などにする。また、git log を残している場合、プッシュする前にAPIKeyを更新して、ネットに有効なAPIKeyが公開されないようにする。(2023/09/23 ダイアログで入力してもらうように修正)

***

## 今後の展望

- タイトルだけでなく、編集可能な「メモ」機能をつけたいかも。メモは、押したらメモが出てくるなどアイコンなどで実装すればスペースがなくてもいけそう。
- 最初に「サイトのサムネイルやファビコンが必要な場合、下記サイトからAPIKeyを取得し、入力してください」のようなダイアログを表示させ、APIKeyをLocal Storageに保存し、動くように修正したい。(2023/09/23 ダイアログで入力してもらうように修正)
- サーバーを立てることで、APIKeyなどが必要なくなるかもしれない。

***

## 注意点

GitHub Pages に上げたウェブサイトはデモ版となっています。そのため、有効なAPIKeyがなく、サイトのサムネイルやファビコン、タイトルの取得ができません。

したがって、利用する際はこのリポジトリをクローンし、下記サイトでApiKeyを取得し、「ApiKey.js」の中にそれを記述して利用してください。

[https://www.opengraph.io/](https://www.opengraph.io/)
